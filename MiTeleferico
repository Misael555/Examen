package hola;
import java.util.ArrayList;

public class MiTeleferico {
    private ArrayList<Linea> lineas;
    private float cantidadIngresos;

    public MiTeleferico() {
        this.lineas = new ArrayList<>();
        this.cantidadIngresos = 0;
    }

    public void agregarLinea(Linea linea) {
        lineas.add(linea);
    }

    public void agregarPersonaFila(Persona p, String colorLinea) {
        for (Linea l : lineas) {
            if (l.getColor().equalsIgnoreCase(colorLinea)) {
                l.agregarPersonaFila(p);
                return;
            }
        }
        System.out.println("No existe la línea " + colorLinea);
    }

    public void agregarCabina(String colorLinea) {
        for (Linea l : lineas) {
            if (l.getColor().equalsIgnoreCase(colorLinea)) {
                l.agregarCabina(l.getCabinas().size() + 1);
                return;
            }
        }
    }

    public void verificarReglas() {
        for (Linea l : lineas) {
            for (Cabina c : l.getCabinas()) {
                float peso = 0;
                for (Persona p : c.getPersonas()) {
                    peso += p.getPeso();
                }
                if (c.getPersonas().size() > 10 || peso > 850) {
                    System.out.println("Reglas incumplidas en línea "
                        + l.getColor() + ", cabina " + c);
                }
            }
        }
    }

    public float calcularIngresos() {
        cantidadIngresos = 0;

        for (Linea l : lineas) {
            for (Cabina c : l.getCabinas()) {
                for (Persona p : c.getPersonas()) {

                    if (p.getEdad() < 25 || p.getEdad() > 60) {
                        cantidadIngresos += 1.5; 
                    } else {
                        cantidadIngresos += 3;  
                    }
                }
            }
        }
        return cantidadIngresos;
    }

    public String lineaMayorIngresoRegular() {
        String mejorLinea = "";
        float maxIng = 0;

        for (Linea l : lineas) {
            float ingresoLinea = 0;

            for (Cabina c : l.getCabinas()) {
                for (Persona p : c.getPersonas()) {
                    if (p.getEdad() >= 25 && p.getEdad() <= 60) {
                        ingresoLinea += 3; 
                    }
                }
            }

            if (ingresoLinea > maxIng) {
                maxIng = ingresoLinea;
                mejorLinea = l.getColor();
            }
        }

        return mejorLinea;
    }
}
